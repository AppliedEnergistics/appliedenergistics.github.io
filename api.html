<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.png" sizes="any"/><title>AE2 - Addon and Mod API</title><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/edd2be9cd1e0aaa5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/edd2be9cd1e0aaa5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/ea9ff644221277ed.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ea9ff644221277ed.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-27593bf8d60abcde.js" defer=""></script><script src="/_next/static/chunks/framework-beb51d85c0b60541.js" defer=""></script><script src="/_next/static/chunks/main-404bdd3acbdd01ab.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c10cfc32dbcfdf33.js" defer=""></script><script src="/_next/static/chunks/650-47515ce5bbed5d14.js" defer=""></script><script src="/_next/static/chunks/pages/%5B%5B...slug%5D%5D-9af176d4b706cc9a.js" defer=""></script><script src="/_next/static/MtdSgGyLuMS424iNoQNTF/_buildManifest.js" defer=""></script><script src="/_next/static/MtdSgGyLuMS424iNoQNTF/_ssgManifest.js" defer=""></script><script src="/_next/static/MtdSgGyLuMS424iNoQNTF/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><nav class="navbar has-shadow" role="navigation" aria-label="main navigation"><div class="navbar-brand"><a class="navbar-item" href="/"><img alt="" src="/assets/logo/logo_00.png"/>Applied Energistics 2</a><a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Documentation</a><a class="navbar-item" href="/download">Download</a><a class="navbar-item" href="https://github.com/AppliedEnergistics/Applied-Energistics-2/issues/new/choose">Report Issue</a></div><div class="navbar-end"><div class="navbar-item"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="navbar-item"><div class="buttons"><a href="https://discord.gg/Zd6t9ka7ne" target="_blank" rel="noreferrer" class="button"><span class="icon"><svg viewBox="0 0 24 24" role="presentation"><path d="M22,24L16.75,19L17.38,21H4.5A2.5,2.5 0 0,1 2,18.5V3.5A2.5,2.5 0 0,1 4.5,1H19.5A2.5,2.5 0 0,1 22,3.5V24M12,6.8C9.32,6.8 7.44,7.95 7.44,7.95C8.47,7.03 10.27,6.5 10.27,6.5L10.1,6.33C8.41,6.36 6.88,7.53 6.88,7.53C5.16,11.12 5.27,14.22 5.27,14.22C6.67,16.03 8.75,15.9 8.75,15.9L9.46,15C8.21,14.73 7.42,13.62 7.42,13.62C7.42,13.62 9.3,14.9 12,14.9C14.7,14.9 16.58,13.62 16.58,13.62C16.58,13.62 15.79,14.73 14.54,15L15.25,15.9C15.25,15.9 17.33,16.03 18.73,14.22C18.73,14.22 18.84,11.12 17.12,7.53C17.12,7.53 15.59,6.36 13.9,6.33L13.73,6.5C13.73,6.5 15.53,7.03 16.56,7.95C16.56,7.95 14.68,6.8 12,6.8M9.93,10.59C10.58,10.59 11.11,11.16 11.1,11.86C11.1,12.55 10.58,13.13 9.93,13.13C9.29,13.13 8.77,12.55 8.77,11.86C8.77,11.16 9.28,10.59 9.93,10.59M14.1,10.59C14.75,10.59 15.27,11.16 15.27,11.86C15.27,12.55 14.75,13.13 14.1,13.13C13.46,13.13 12.94,12.55 12.94,11.86C12.94,11.16 13.45,10.59 14.1,10.59Z" style="fill:#5865F2"></path></svg></span><span>Discord</span></a><a href="https://github.com/AppliedEnergistics/Applied-Energistics-2" target="_blank" rel="noreferrer" class="button"><span class="icon"><svg viewBox="0 0 24 24" role="presentation"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" style="fill:#181717"></path></svg></span><span>GitHub</span></a><a href="https://github.com/AppliedEnergistics/appliedenergistics.github.io/edit/source/content/api.md" class="button" target="_blank" rel="noreferrer"><span class="icon"><svg viewBox="0 0 24 24" role="presentation"><path d="M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H10V20.09L12.09,18H6V16H14.09L16.09,14H6V12H18.09L20,10.09V8L14,2H6M13,3.5L18.5,9H13V3.5M20.15,13C20,13 19.86,13.05 19.75,13.16L18.73,14.18L20.82,16.26L21.84,15.25C22.05,15.03 22.05,14.67 21.84,14.46L20.54,13.16C20.43,13.05 20.29,13 20.15,13M18.14,14.77L12,20.92V23H14.08L20.23,16.85L18.14,14.77Z" style="fill:currentColor"></path></svg></span><span>Edit Page</span></a></div></div><div class="navbar-item is-hidden-desktop"><p class="menu-label">Introduction</p><ul class="menu-list"><li><a href="/getting-started"><div class="icon-text"><span>Getting Started</span></div></a></li><li><a href="/frequently-asked-questions"><div class="icon-text"><span>Frequently Asked Questions</span></div></a></li><li><a href="/miscellaneous-tips"><div class="icon-text"><span>Miscellaneous Tips</span></div></a></li><li><a href="/customizing-ae2"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_wrench.png"/></span><span>Customizing AE2</span></div></a></li><li><a class="is-active" href="/api"><div class="icon-text"><span>API</span></div></a></li></ul><p class="menu-label">Mechanics</p><ul class="menu-list"><li><a href="/features/crystals"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_crystal.png"/></span><span>Crystals</span></div></a></li><li><a href="/features/meteorites"><div class="icon-text"><span class="icon"><img src="/icons/ae2/sky_compass.png"/></span><span>Meteorites</span></div></a></li><li><a href="/features/auto-crafting"><div class="icon-text"><span class="icon"><img src="/icons/ae2/molecular_assembler.png"/></span><span>Auto-Crafting</span></div></a></li><li><a href="/features/me-network/powered-machines/inscriber"><div class="icon-text"><span class="icon"><img src="/icons/ae2/inscriber.png"/></span><span>Inscriber</span></div></a></li></ul><p class="menu-label">ME Networks</p><ul class="menu-list"><li><a href="/features/me-network"><div class="icon-text"><span>Overview</span></div></a></li><li><a href="/features/me-network/channels"><div class="icon-text"><span class="icon"><img src="/icons/ae2/controller.png"/></span><span>Channels</span></div></a></li><li><a href="/features/me-network/ad-hoc-networks"><div class="icon-text"><span>Ad Hoc Networks</span></div></a></li><li><a href="/features/me-network/cables"><div class="icon-text"><span class="icon"><img src="/icons/ae2/fluix_glass_cable.png"/></span><span>Cables</span></div></a></li><li><a href="/features/me-network/storage-cells"><div class="icon-text"><span class="icon"><img src="/icons/ae2/item_storage_cell_64k.png"/></span><span>Storage Cells</span></div></a></li><li><a href="/features/me-network/network-energy"><div class="icon-text"><span class="icon"><img src="/icons/ae2/energy_cell.png"/></span><span>Network Energy</span></div></a></li><li><a href="/features/me-network/terminals"><div class="icon-text"><span class="icon"><img src="/icons/ae2/crafting_terminal.png"/></span><span>Terminals</span></div></a></li><li><a href="/features/me-network/monitors"><div class="icon-text"><span class="icon"><img src="/icons/ae2/conversion_monitor.png"/></span><span>Storage Monitors</span></div></a></li><li><a href="/features/me-network/wireless-access"><div class="icon-text"><span class="icon"><img src="/icons/ae2/wireless_receiver.png"/></span><span>Wireless Access</span></div></a></li><li><a href="/features/me-network/quantum-bridge"><div class="icon-text"><span class="icon"><img src="/icons/ae2/singularity.png"/></span><span>Quantum Bridge</span></div></a></li><li><a href="/features/me-network/misc/p2p-tunnel"><div class="icon-text"><span class="icon"><img src="/icons/ae2/me_p2p_tunnel.png"/></span><span>P2P Tunnel</span></div></a></li></ul><p class="menu-label">Simple Tools</p><ul class="menu-list"><li><a href="/features/simple-tools/quartz-tools"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_pickaxe.png"/></span><span>Quartz Tools</span></div></a></li><li><a href="/features/simple-tools/cutting-knife"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_cutting_knife.png"/></span><span>Cutting Knife</span></div></a></li><li><a href="/features/simple-tools/wrench"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_wrench.png"/></span><span>Wrench</span></div></a></li><li><a href="/features/simple-tools/sky-stone-chest"><div class="icon-text"><span class="icon"><img src="/icons/ae2/sky_stone_chest.png"/></span><span>Sky Stone Chest</span></div></a></li><li><a href="/features/simple-tools/light-detecting-fixture"><div class="icon-text"><span class="icon"><img src="/icons/ae2/light_detector.png"/></span><span>Light Detector</span></div></a></li><li><a href="/features/simple-tools/tiny-tnt"><div class="icon-text"><span class="icon"><img src="/icons/ae2/tiny_tnt.png"/></span><span>Tiny TNT</span></div></a></li></ul><p class="menu-label">Decorative Blocks</p><ul class="menu-list"><li><a href="/features/decorative-blocks/certus-quartz"><div class="icon-text"><span class="icon"><img src="/icons/ae2/quartz_block.png"/></span><span>Certus Quartz</span></div></a></li><li><a href="/features/decorative-blocks/quartz-glass"><div class="icon-text"><span class="icon"><img src="/icons/ae2/quartz_glass.png"/></span><span>Quartz Glass</span></div></a></li><li><a href="/features/decorative-blocks/sky-stone"><div class="icon-text"><span class="icon"><img src="/icons/ae2/smooth_sky_stone_block.png"/></span><span>Sky Stone</span></div></a></li><li><a href="/features/decorative-blocks/fluix"><div class="icon-text"><span class="icon"><img src="/icons/ae2/fluix_block.png"/></span><span>Fluix</span></div></a></li><li><a href="/features/decorative-blocks/quartz-fixture"><div class="icon-text"><span class="icon"><img src="/icons/ae2/quartz_fixture.png"/></span><span>Quartz Fixtures</span></div></a></li><li><a href="/features/decorative-blocks/illuminated-panel"><div class="icon-text"><span class="icon"><img src="/icons/ae2/monitor.png"/></span><span>Illuminated Panel</span></div></a></li><li><a href="/features/decorative-blocks/cable-anchor"><div class="icon-text"><span class="icon"><img src="/icons/ae2/cable_anchor.png"/></span><span>Cable Anchor</span></div></a></li><li><a href="/features/decorative-blocks/cable-facade"><div class="icon-text"><span class="icon"><img src="/icons/ae2/facade.png"/></span><span>Cable Facade</span></div></a></li></ul></div></div></div></nav><div class="main-container"><aside class="menu is-hidden-touch"><p class="menu-label">Introduction</p><ul class="menu-list"><li><a href="/getting-started"><div class="icon-text"><span>Getting Started</span></div></a></li><li><a href="/frequently-asked-questions"><div class="icon-text"><span>Frequently Asked Questions</span></div></a></li><li><a href="/miscellaneous-tips"><div class="icon-text"><span>Miscellaneous Tips</span></div></a></li><li><a href="/customizing-ae2"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_wrench.png"/></span><span>Customizing AE2</span></div></a></li><li><a class="is-active" href="/api"><div class="icon-text"><span>API</span></div></a></li></ul><p class="menu-label">Mechanics</p><ul class="menu-list"><li><a href="/features/crystals"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_crystal.png"/></span><span>Crystals</span></div></a></li><li><a href="/features/meteorites"><div class="icon-text"><span class="icon"><img src="/icons/ae2/sky_compass.png"/></span><span>Meteorites</span></div></a></li><li><a href="/features/auto-crafting"><div class="icon-text"><span class="icon"><img src="/icons/ae2/molecular_assembler.png"/></span><span>Auto-Crafting</span></div></a></li><li><a href="/features/me-network/powered-machines/inscriber"><div class="icon-text"><span class="icon"><img src="/icons/ae2/inscriber.png"/></span><span>Inscriber</span></div></a></li></ul><p class="menu-label">ME Networks</p><ul class="menu-list"><li><a href="/features/me-network"><div class="icon-text"><span>Overview</span></div></a></li><li><a href="/features/me-network/channels"><div class="icon-text"><span class="icon"><img src="/icons/ae2/controller.png"/></span><span>Channels</span></div></a></li><li><a href="/features/me-network/ad-hoc-networks"><div class="icon-text"><span>Ad Hoc Networks</span></div></a></li><li><a href="/features/me-network/cables"><div class="icon-text"><span class="icon"><img src="/icons/ae2/fluix_glass_cable.png"/></span><span>Cables</span></div></a></li><li><a href="/features/me-network/storage-cells"><div class="icon-text"><span class="icon"><img src="/icons/ae2/item_storage_cell_64k.png"/></span><span>Storage Cells</span></div></a></li><li><a href="/features/me-network/network-energy"><div class="icon-text"><span class="icon"><img src="/icons/ae2/energy_cell.png"/></span><span>Network Energy</span></div></a></li><li><a href="/features/me-network/terminals"><div class="icon-text"><span class="icon"><img src="/icons/ae2/crafting_terminal.png"/></span><span>Terminals</span></div></a></li><li><a href="/features/me-network/monitors"><div class="icon-text"><span class="icon"><img src="/icons/ae2/conversion_monitor.png"/></span><span>Storage Monitors</span></div></a></li><li><a href="/features/me-network/wireless-access"><div class="icon-text"><span class="icon"><img src="/icons/ae2/wireless_receiver.png"/></span><span>Wireless Access</span></div></a></li><li><a href="/features/me-network/quantum-bridge"><div class="icon-text"><span class="icon"><img src="/icons/ae2/singularity.png"/></span><span>Quantum Bridge</span></div></a></li><li><a href="/features/me-network/misc/p2p-tunnel"><div class="icon-text"><span class="icon"><img src="/icons/ae2/me_p2p_tunnel.png"/></span><span>P2P Tunnel</span></div></a></li></ul><p class="menu-label">Simple Tools</p><ul class="menu-list"><li><a href="/features/simple-tools/quartz-tools"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_pickaxe.png"/></span><span>Quartz Tools</span></div></a></li><li><a href="/features/simple-tools/cutting-knife"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_cutting_knife.png"/></span><span>Cutting Knife</span></div></a></li><li><a href="/features/simple-tools/wrench"><div class="icon-text"><span class="icon"><img src="/icons/ae2/certus_quartz_wrench.png"/></span><span>Wrench</span></div></a></li><li><a href="/features/simple-tools/sky-stone-chest"><div class="icon-text"><span class="icon"><img src="/icons/ae2/sky_stone_chest.png"/></span><span>Sky Stone Chest</span></div></a></li><li><a href="/features/simple-tools/light-detecting-fixture"><div class="icon-text"><span class="icon"><img src="/icons/ae2/light_detector.png"/></span><span>Light Detector</span></div></a></li><li><a href="/features/simple-tools/tiny-tnt"><div class="icon-text"><span class="icon"><img src="/icons/ae2/tiny_tnt.png"/></span><span>Tiny TNT</span></div></a></li></ul><p class="menu-label">Decorative Blocks</p><ul class="menu-list"><li><a href="/features/decorative-blocks/certus-quartz"><div class="icon-text"><span class="icon"><img src="/icons/ae2/quartz_block.png"/></span><span>Certus Quartz</span></div></a></li><li><a href="/features/decorative-blocks/quartz-glass"><div class="icon-text"><span class="icon"><img src="/icons/ae2/quartz_glass.png"/></span><span>Quartz Glass</span></div></a></li><li><a href="/features/decorative-blocks/sky-stone"><div class="icon-text"><span class="icon"><img src="/icons/ae2/smooth_sky_stone_block.png"/></span><span>Sky Stone</span></div></a></li><li><a href="/features/decorative-blocks/fluix"><div class="icon-text"><span class="icon"><img src="/icons/ae2/fluix_block.png"/></span><span>Fluix</span></div></a></li><li><a href="/features/decorative-blocks/quartz-fixture"><div class="icon-text"><span class="icon"><img src="/icons/ae2/quartz_fixture.png"/></span><span>Quartz Fixtures</span></div></a></li><li><a href="/features/decorative-blocks/illuminated-panel"><div class="icon-text"><span class="icon"><img src="/icons/ae2/monitor.png"/></span><span>Illuminated Panel</span></div></a></li><li><a href="/features/decorative-blocks/cable-anchor"><div class="icon-text"><span class="icon"><img src="/icons/ae2/cable_anchor.png"/></span><span>Cable Anchor</span></div></a></li><li><a href="/features/decorative-blocks/cable-facade"><div class="icon-text"><span class="icon"><img src="/icons/ae2/facade.png"/></span><span>Cable Facade</span></div></a></li></ul></aside><main><div class="container"><h1 class="title">Addon and Mod API</h1><div class="content"><div class="block">The Javadocs of the latest unreleased version are available at <a href="https://appliedenergistics.github.io/javadoc/">https://appliedenergistics.github.io/javadoc/</a>.</div><h2 id="mod-initialization">Mod Initialization</h2><div class="block">AE2 offers various extension points for your mod to hook into. The following table lists the API classes that are most
relevant during mod initialization:</div><table><thead><tr><th>Class</th><th>Purpose</th></tr></thead><tbody><tr><td><code>appeng.api.stacks.AEKeyTypes</code></td><td>Addons can use this class to register custom storage types similar to <code>AEItemKey</code> and <code>AEFluidKey</code>.</td></tr><tr><td><code>appeng.api.networking.GridServices</code></td><td>Addons can register their own grid-wide services here.</td></tr><tr><td><code>appeng.api.features.AEWorldGen</code></td><td>Offers limited control over AE2&#x27;s world generation.</td></tr><tr><td><code>appeng.api.movable.BlockEntityMoveStrategies</code></td><td>Allows mods to register custom strategies for moving block entities in and out of spatial storage.</td></tr><tr><td><code>appeng.api.features.GridLinkables</code></td><td>For working with and adding items that can be linked to a grid in the security station.</td></tr><tr><td><code>appeng.api.storage.StorageCells</code></td><td>For working with and adding items that serve as storage cells for grids.</td></tr><tr><td><code>appeng.api.features.Locatables</code></td><td>For discovering security stations and quantum network bridges based on their unique keys, regardless of location.</td></tr><tr><td><code>appeng.api.parts.PartModels</code></td><td>For registering JSON block models used by custom cable bus parts.</td></tr><tr><td><code>appeng.api.features.P2PTunnelAttunement</code></td><td>For registering new items that attune P2P tunnels to specific types when right-clicked.</td></tr><tr><td><code>appeng.api.client.StorageCellModels</code></td><td>For customizing the models of storage cells when they&#x27;re inserted into drives or ME chests.</td></tr></tbody></table><div class="block">In general, these classes are thread-safe and may be used directly in a mod&#x27;s constructor or thereafter.
Once initialization of mods has completed however, changes to these registries result in undefined behavior.</div><div class="block">Since order of mod initialization on Fabric is undefined, addons that rely on AE2&#x27;s items and blocks being registered
will need to use the custom entrypoint defined by <code>IAEAddonEntrypoint</code>. See that classes javadoc for details.</div><h2 id="item-and-fluid-keys">Item and Fluid Keys</h2><div class="block">Item and fluid types are represented by keys in AE2. The <code>AEKey</code> class is the base for all keys, whether they represent
items (<code>AEItemKey</code>) or fluids (<code>AEFluidKey</code>). Most of AE2s interfaces are generic in that they accept any <code>AEKey</code>,
whether it is for a fluid or item. </div><div class="block">Keys do not have counts since they don&#x27;t represent a particular amount of items or fluid, they represent the <em>type</em>
of item or type of fluid. As such, an item key consists of a reference to the <code>Item</code> and potential NBT data.</div><div class="block">To represent a stack of some key, AE2 provides the utility class <code>GenericStack</code>. It consists of a key and an amount.</div><div class="block">Each type of key is represented by an instance of <code>AEKeyType</code>, which is accessible via <code>AEKey.getType()</code>. It stores
some properties common to all keys of a type (i.e. all item keys, or all fluid keys). </div><div class="block">Keys can be saved to from NBT using <code>toTagGeneric</code>, which also stores a reference to their type so that
<code>AEKey.fromTagGeneric</code> can restore the key of the correct type. The same mechanism can be used for packets with
<code>AEKey.writeToPacket</code> and <code>AEKey.readKey</code>.</div><div class="block">Sicne Java 16, the following patter makes it easy to work with generic keys when your code only supports items:</div><pre><code class="language-java">if (key instanceof AEItemKey itemKey) {
    ItemStack is = itemKey.toStack();
    // [...]
}
</code></pre><h2 id="grids-and-nodes">Grids and Nodes</h2><div class="block">AE2&#x27;s core systems work by building grids from grid nodes that are created and owned by ingame objects such as block
entities or parts. Grids are never created directly. They form and disband automatically by creating grid nodes, and
connecting or disconnecting them.</div><div class="block"><strong>NOTE:</strong> Grids a purely a server-side concept. They do not exist on the client.</div><h3 id="node-owners-and-listeners">Node Owners and Listeners</h3><div class="block">Every node is owned by an in-game object. An owner doesn&#x27;t need to implement any particular interface. This makes it
possible to integrate existing game objects with AE2 without having to introduce a hard dependency on it.</div><div class="block">The node uses a listener (<code>IGridNodeListener&lt;T&gt;</code>) to interact with its owner. Both owner and listener have to be passed
together to <code>IGridHelper</code> to create a node to allow the listener to be reused while still having type-safe access to the
owner.</div><div class="block"><strong>Example:</strong></div><pre><code class="language-java">class MyBlockEntityListener implements IGridNodeListener&lt;MyBlockEntity&gt; {
    public static final MyBlockEntityListener INSTANCE = new MyBlockEntityListener();

    @Override
    public void onStateChanged(MyBlockEntity nodeOwner, IGridNode node, StateChangeReason reason) {
        [...]
        // for example: change block state of nodeOwner to indicate state
        // send node owner to clients
    }
}
</code></pre><pre><code class="language-java">class MyBlockEntity {
    // Create node with owner and listener
    private final IManagedNode mainNode = api.createManagedNode(
            this,
            MyBlockEntityListener.INSTANCE
    );
}
</code></pre><h3 id="managed-grid-nodes">Managed Grid Nodes</h3><div class="block">The <code>IGridHelper</code> API offers a <code>createManagedNode</code> method to create an <code>IManagedGridNode</code>. Managed grid nodes simplify
the lifecycle of creating and destroying grid nodes, and can be used to simplify the distinction between server and
client, since they are available on the client-side as well. They will just not create the underlying node if they&#x27;re
being used on the client.</div><div class="block">Your game object should notify the managed node about the following events:</div><ul><li>Call <code>destroy</code> on the node when your game object is destroyed or its chunk unloaded.</li><li>Call <code>create</code> when the node can assume the owner is now in-world and ready to make outgoing connections (i.e. on its
first tick).</li><li>When your game object loads from NBT data, load the node&#x27;s stored data using <code>loadFromNBT</code>. This has to occur before
you call <code>create</code>.</li><li>When your game object saves to NBT data, save the node&#x27;s data using <code>saveToNBT</code>.</li></ul><h3 id="in-world-nodes">In-World Nodes</h3><div class="block">The main type of grid node are in-world grid nodes. They need to know their location and world when being created with
<code>IManagedGridNode.create(Level, BlockPos)</code>. External connections are automatically attempt to connect with adjacent
in-world grid nodes by AE2 itself and do not need further handling.</div><div class="block">In-world nodes can be selectively exposed on specific sides, or on all sides. The exposed sides can be changed after
node creation and will automatically trigger a repathing.</div><div class="block">To expose the actual <code>IGridNode</code>, it needs to be exposed by <code>IManagedGridNode.getNode()</code> through an appropriate way like
capabilities.</div><h3 id="virtual-nodes">Virtual Nodes</h3><div class="block">A special case are virtual nodes, which will not automatically form connection with other nodes. These allow addons to
build ME networks outside the normal world for various reasons.</div><div class="block">As these do not automatically establish connections, these have to be manually created with by using
<code>IGridHelper.createGridConnection(IGridNode, IGridNode)</code>. Removing a connection requires destroying the <code>IGridNode</code>,
which also handles chunk unloading and ensures it leaving no old connections behind.</div><h3 id="node-services">Node Services</h3><div class="block">The node&#x27;s owner can add so-called services to a node, which can be used to add additional functionality or behavior to
grid nodes. Services are represented by an interface that extends from <code>IGridService</code>.</div><div class="block">Node services are often used by grid services to offer additional functionality to grid nodes that implement a specific
service. These will be described in more detail in the description of the respective grid service.</div><h3 id="grid-services">Grid Services</h3><div class="block">Each grid provides several services to machines connected to the grid.</div><div class="block">AE2 provides some services by default (see sub-interfaces of <code>IGridService</code>). Addons can register their own services
using <code>GridServices</code>.</div><div class="block">Services can be retrieved by calling <code>IGrid#getService</code> by passing the grid service&#x27;s interface. For getting AE2&#x27;s
default services, <code>IGrid</code> offers several convenience methods.</div><h4 id="energy">Energy</h4><div class="block"><strong>Service Interface:</strong> <code>IEnergyService</code></div><div class="block">This service allows energy to be extracted from and injected into the grid&#x27;s energy storage (i.e. energy cells, the
grid&#x27;s internal storage, etc.).</div><h4 id="ticking">Ticking</h4><div class="block"><strong>Service Interface:</strong> <code>ITickManager</code>
<strong>Convenience Getter</strong>: <code>IGrid.getTickManager</code></div><div class="block">AE2 offers its grid connected machines an advanced ticking system with the following features:</div><ul><li>Ticking without being a tickable block entity</li><li>Variable tick rates</li><li>Putting devices to sleep if they run out of work</li><li>Waking sleeping devices in reaction to some event (i.e. neighbors changed)</li></ul><div class="block">The grid&#x27;s <code>ITickManager</code> service handles the per-grid aspects of this ticking system. It offers an API to manage the
sleep/wake status of grid nodes.</div><div class="block">To participate in the ticking system, your grid node must provide the <code>IGridTickable</code>
grid node service. The <code>ITickManager</code> reacts to the presence of this service when your grid node joins the grid.</div><h4 id="storage">Storage</h4><div class="block"><strong>Service Interface</strong>: <code>IStorageService</code>
<strong>Convenience Getter</strong>: <code>IGrid.getStorageService</code></div><div class="block">This service allows nodes to notify listeners about changes to their inventory that are not caused by normal
extraction/insertion, such as the external inventories (i.e. chests) changing their content.</div><div class="block">Storage in grids is organized in &quot;cells&quot; which model inventories.</div><div class="block">It also implements <code>IStorageMonitorable</code> to allow changes to the grid&#x27;s inventory to be monitored.</div><h4 id="auto-crafting">Auto-Crafting</h4><div class="block"><strong>Service Interface</strong>: <code>ICraftingService</code></div><h4 id="security">Security</h4><div class="block"><strong>Service Interface</strong>: <code>ISecurityService</code></div><h4 id="pathing">Pathing</h4><div class="block"><strong>Service Interface</strong>: <code>IPathingService</code></div><h4 id="spatial-io">Spatial I/O</h4><div class="block"><strong>Service Interface</strong>: <code>ISpatialService</code></div><h2 id="adding-new-upgrades-or-making-upgradable-machines">Adding New Upgrades or Making Upgradable Machines</h2><div class="block">This will be made available in 10.0.0-beta.3.</div><div class="block">Relevant APIs:</div><ul><li><code>appeng.api.upgrades.Upgrades</code> for managing upgrade cards and associating them with machines</li><li><code>appeng.api.upgrades.UpgradeInventories</code> for creating upgrade inventories for use in upgradable machines or items</li></ul><h3 id="custom-upgrade-cards">Custom Upgrade Cards</h3><div class="block">Each upgrade is unique identified by a registered item (the &quot;upgrade card&quot;). To create a custom upgrade card that
behaves like the existing AE2 cards (i.e. it can be inserted into the network tool&#x27;s toolbelt), use the
utility function <code>Upgrades#createUpgradeCardItem</code> to create an item for your card. Remember it&#x27;s your responsibility
to actually register this item, provide an icon and a translation key for it. It will however, show the tooltip for supported machines and support insertion into machines by right-click out of the box. </div><h3 id="associating-upgrade-cards-with-machines">Associating Upgrade Cards with Machines</h3><div class="block">For both cases where your addon adds a custom machine or upgrade card, you need to associate possible upgrades
with potential machines. The <code>Upgrades.add</code> method allows you to link an upgrade card (represented by its Item) with
a Machine (also represented by an item, usually a <code>BlockItem</code> or <code>IPartItem</code>). </div><div class="block">If there are multiple machines that are treated equally with regard to upgrades, you can pass a translation key to
the <code>tooltipGroup</code> parameter. When displaying the tooltip for an upgrade card, all supported machines with the same
<code>tooltipGroup</code> will be merged into a single line and shown using the translation for the group. This was used
for displaying fluid and item parts as one line, as well as the block/part form of interfaces. </div><h3 id="making-custom-machines-upgradable">Making custom Machines Upgradable</h3><div class="block">You can use the factory class <code>UpgradeInventories</code> to create inventories for storing upgrade cards. These
inventories will use the provided item to identify which upgrade cards are accepted by the inventory to
automatically prevent incompatible cards from being inserted.</div><div class="block">They also offer convenience methods (see <code>IUpgradeInventory</code>) to quickly check if an upgrade is present or
count how many upgrades of a type are present.</div><div class="block">For the machine version created by <code>forMachine</code>, you are responsible for saving the inventory yourself from the
change callback. For the item version created by <code>forItem</code>, the upgrade inventory will automatically save itself
to the provided ´ItemStack` whenever its content changes.</div><h1 id="changes-from-117-and-before-to-118">Changes from 1.17 and before to 1.18</h1><div class="block">There are large changes to the API in 1.18.</div><div class="block"><code>IAEStack</code>, <code>IAEItemStack</code> and <code>IAEFluidStack</code> have been removed. The API now separates the &quot;what&quot; from the &quot;how much&quot;
in that it uses <code>AEKey</code> to identify what is being transferred, while a separate method-argument is used for the
amount.</div><div class="block">The mapping is roughly as follows:</div><table><thead><tr><th>Old Class</th><th>New Class</th></tr></thead><tbody><tr><td>IAEStack</td><td>GenericStack, AEKey</td></tr><tr><td>IAEItemStack</td><td>GenericStack, AEItemKey</td></tr><tr><td>IAEFluidStack</td><td>GenericStack, AEFluidKey</td></tr><tr><td>IStorageChannel</td><td>AEKeyType</td></tr><tr><td>StorageChannels</td><td>AEKeyTypes</td></tr><tr><td>StorageChannels.items()</td><td>AEKeyType.items()</td></tr><tr><td>StorageChannels.fluids()</td><td>AEKeyType.fluids()</td></tr><tr><td>IMEInventory</td><td>MEStorage</td></tr><tr><td>IMEMonitorable</td><td>MEMonitorStorage</td></tr><tr><td>IGuiItem</td><td>IMenuItem (Use ItemMenuHost)</td></tr><tr><td>IPortableCell</td><td>IPortableTerminal</td></tr><tr><td>ICraftingMedium</td><td>ICraftingMachine</td></tr><tr><td>ICellProvider</td><td>IStorageProvider</td></tr><tr><td>getUnitsPerByte</td><td>getAmountPerByte</td></tr><tr><td>transferFactor</td><td>getAmountPerOperation</td></tr></tbody></table><div class="block">The network inventory is no longer channel specific. It contains items, fluids and potentially keys
from addons at the same time. This also means <code>IStorageMonitorable</code> has become superfluous and was removed.
<code>IStorageMonitorableAccessor</code> now gives direct access to the storage.</div><div class="block">Stack watching has changed to only send the keys for which the stored amount has changed. This was
done since the amounts reported to the watchers were never reliable to begin with, and were never used.</div><div class="block">Craftable items are no longer reported as part of the network storage. It has been replaced by
<code>grid.getCraftingService().getCraftables()</code>. <code>NoOpKeyFilter</code> is provided in case you want all types of
keys, otherwise there are the convenience filters <code>AEItemKey.filter()</code> and <code>AEFluidKey.filter()</code> to
only retrieve items or fluids.</div><div class="block">Mounting storage into the network storage has been changed. Since storage has been unified across types,
the storage service will now call <code>mountInventories</code> on the <code>IStorageProvider</code> service provided by any
grid node and allow the node to &quot;mount&quot; storage into the network.
When the node wants to remove or add storage due to an external event or config change, it can request
the storage to repeat the mounting process by calling <code>IStorageGrid.refreshNodeStorageProvider</code> or using
the utility provided in <code>IStorageProvider.requestUpdate</code>. This supersedes sending the <code>GridCellArrayUpdate</code> event.</div><h2 id="internal-apis">Internal APIs</h2><div class="block">The following changes have been made to internal APIs, which may still be of interest to addons that
depend on them.</div><div class="block">Items that open AE GUIs are now more addon friendly. The <code>ItemMenuHost</code> class can be used as an easy
way to implement a menu host for hosting terminals and other menus.</div><div class="block">The priority and crafting confirm menus now use a generic system for returning to the previous screen.
Your part, block entity or item menu host needs to implement <code>ISubMenuHost</code> for this to work.</div><div class="block">Custom storage cells have been simplified, and the same class can be used to create addon storage
cells for any stored item key. Due to the storage math still being different for items and fluids,
there are still key-type specific cells, which are all based on the same class <code>BasicStorageCell</code>,
which doesn&#x27;t have a guaranteed API however (this is an improvement for later).</div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"var c=Object.defineProperty,m=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;var l=(n,t,a)=\u003et in n?c(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,e=(n,t)=\u003e{for(var a in t||(t={}))o.call(t,a)\u0026\u0026l(n,a,t[a]);if(r)for(var a of r(t))d.call(t,a)\u0026\u0026l(n,a,t[a]);return n},s=(n,t)=\u003em(n,h(t));var p=(n,t)=\u003e{var a={};for(var i in n)o.call(n,i)\u0026\u0026t.indexOf(i)\u003c0\u0026\u0026(a[i]=n[i]);if(n!=null\u0026\u0026r)for(var i of r(n))t.indexOf(i)\u003c0\u0026\u0026d.call(n,i)\u0026\u0026(a[i]=n[i]);return a};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(a){var i=a,{components:n}=i,t=p(i,[\"components\"]);return mdx(MDXLayout,s(e(e({},layoutProps),t),{components:n,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"The Javadocs of the latest unreleased version are available at \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://appliedenergistics.github.io/javadoc/\"}),\"https://appliedenergistics.github.io/javadoc/\"),\".\"),mdx(\"h2\",e({},{id:\"mod-initialization\"}),\"Mod Initialization\"),mdx(\"p\",null,`AE2 offers various extension points for your mod to hook into. The following table lists the API classes that are most\nrelevant during mod initialization:`),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Class\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Purpose\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.stacks.AEKeyTypes\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"Addons can use this class to register custom storage types similar to \",mdx(\"inlineCode\",{parentName:\"td\"},\"AEItemKey\"),\" and \",mdx(\"inlineCode\",{parentName:\"td\"},\"AEFluidKey\"),\".\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.networking.GridServices\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"Addons can register their own grid-wide services here.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.features.AEWorldGen\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"Offers limited control over AE2's world generation.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.movable.BlockEntityMoveStrategies\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"Allows mods to register custom strategies for moving block entities in and out of spatial storage.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.features.GridLinkables\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"For working with and adding items that can be linked to a grid in the security station.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.storage.StorageCells\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"For working with and adding items that serve as storage cells for grids.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.features.Locatables\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"For discovering security stations and quantum network bridges based on their unique keys, regardless of location.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.parts.PartModels\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"For registering JSON block models used by custom cable bus parts.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.features.P2PTunnelAttunement\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"For registering new items that attune P2P tunnels to specific types when right-clicked.\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),mdx(\"inlineCode\",{parentName:\"td\"},\"appeng.api.client.StorageCellModels\")),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"For customizing the models of storage cells when they're inserted into drives or ME chests.\")))),mdx(\"p\",null,`In general, these classes are thread-safe and may be used directly in a mod's constructor or thereafter.\nOnce initialization of mods has completed however, changes to these registries result in undefined behavior.`),mdx(\"p\",null,`Since order of mod initialization on Fabric is undefined, addons that rely on AE2's items and blocks being registered\nwill need to use the custom entrypoint defined by `,mdx(\"inlineCode\",{parentName:\"p\"},\"IAEAddonEntrypoint\"),\". See that classes javadoc for details.\"),mdx(\"h2\",e({},{id:\"item-and-fluid-keys\"}),\"Item and Fluid Keys\"),mdx(\"p\",null,\"Item and fluid types are represented by keys in AE2. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey\"),` class is the base for all keys, whether they represent\nitems (`,mdx(\"inlineCode\",{parentName:\"p\"},\"AEItemKey\"),\") or fluids (\",mdx(\"inlineCode\",{parentName:\"p\"},\"AEFluidKey\"),\"). Most of AE2s interfaces are generic in that they accept any \",mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey\"),`,\nwhether it is for a fluid or item. `),mdx(\"p\",null,\"Keys do not have counts since they don't represent a particular amount of items or fluid, they represent the \",mdx(\"em\",{parentName:\"p\"},\"type\"),`\nof item or type of fluid. As such, an item key consists of a reference to the `,mdx(\"inlineCode\",{parentName:\"p\"},\"Item\"),\" and potential NBT data.\"),mdx(\"p\",null,\"To represent a stack of some key, AE2 provides the utility class \",mdx(\"inlineCode\",{parentName:\"p\"},\"GenericStack\"),\". It consists of a key and an amount.\"),mdx(\"p\",null,\"Each type of key is represented by an instance of \",mdx(\"inlineCode\",{parentName:\"p\"},\"AEKeyType\"),\", which is accessible via \",mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey.getType()\"),`. It stores\nsome properties common to all keys of a type (i.e. all item keys, or all fluid keys). `),mdx(\"p\",null,\"Keys can be saved to from NBT using \",mdx(\"inlineCode\",{parentName:\"p\"},\"toTagGeneric\"),`, which also stores a reference to their type so that\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey.fromTagGeneric\"),` can restore the key of the correct type. The same mechanism can be used for packets with\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey.writeToPacket\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey.readKey\"),\".\"),mdx(\"p\",null,\"Sicne Java 16, the following patter makes it easy to work with generic keys when your code only supports items:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-java\"}),`if (key instanceof AEItemKey itemKey) {\n    ItemStack is = itemKey.toStack();\n    // [...]\n}\n`)),mdx(\"h2\",e({},{id:\"grids-and-nodes\"}),\"Grids and Nodes\"),mdx(\"p\",null,`AE2's core systems work by building grids from grid nodes that are created and owned by ingame objects such as block\nentities or parts. Grids are never created directly. They form and disband automatically by creating grid nodes, and\nconnecting or disconnecting them.`),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" Grids a purely a server-side concept. They do not exist on the client.\"),mdx(\"h3\",e({},{id:\"node-owners-and-listeners\"}),\"Node Owners and Listeners\"),mdx(\"p\",null,`Every node is owned by an in-game object. An owner doesn't need to implement any particular interface. This makes it\npossible to integrate existing game objects with AE2 without having to introduce a hard dependency on it.`),mdx(\"p\",null,\"The node uses a listener (\",mdx(\"inlineCode\",{parentName:\"p\"},\"IGridNodeListener\u003cT\u003e\"),`) to interact with its owner. Both owner and listener have to be passed\ntogether to `,mdx(\"inlineCode\",{parentName:\"p\"},\"IGridHelper\"),` to create a node to allow the listener to be reused while still having type-safe access to the\nowner.`),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-java\"}),`class MyBlockEntityListener implements IGridNodeListener\u003cMyBlockEntity\u003e {\n    public static final MyBlockEntityListener INSTANCE = new MyBlockEntityListener();\n\n    @Override\n    public void onStateChanged(MyBlockEntity nodeOwner, IGridNode node, StateChangeReason reason) {\n        [...]\n        // for example: change block state of nodeOwner to indicate state\n        // send node owner to clients\n    }\n}\n`)),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-java\"}),`class MyBlockEntity {\n    // Create node with owner and listener\n    private final IManagedNode mainNode = api.createManagedNode(\n            this,\n            MyBlockEntityListener.INSTANCE\n    );\n}\n`)),mdx(\"h3\",e({},{id:\"managed-grid-nodes\"}),\"Managed Grid Nodes\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGridHelper\"),\" API offers a \",mdx(\"inlineCode\",{parentName:\"p\"},\"createManagedNode\"),\" method to create an \",mdx(\"inlineCode\",{parentName:\"p\"},\"IManagedGridNode\"),`. Managed grid nodes simplify\nthe lifecycle of creating and destroying grid nodes, and can be used to simplify the distinction between server and\nclient, since they are available on the client-side as well. They will just not create the underlying node if they're\nbeing used on the client.`),mdx(\"p\",null,\"Your game object should notify the managed node about the following events:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Call \",mdx(\"inlineCode\",{parentName:\"li\"},\"destroy\"),\" on the node when your game object is destroyed or its chunk unloaded.\"),mdx(\"li\",{parentName:\"ul\"},\"Call \",mdx(\"inlineCode\",{parentName:\"li\"},\"create\"),` when the node can assume the owner is now in-world and ready to make outgoing connections (i.e. on its\nfirst tick).`),mdx(\"li\",{parentName:\"ul\"},\"When your game object loads from NBT data, load the node's stored data using \",mdx(\"inlineCode\",{parentName:\"li\"},\"loadFromNBT\"),`. This has to occur before\nyou call `,mdx(\"inlineCode\",{parentName:\"li\"},\"create\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"When your game object saves to NBT data, save the node's data using \",mdx(\"inlineCode\",{parentName:\"li\"},\"saveToNBT\"),\".\")),mdx(\"h3\",e({},{id:\"in-world-nodes\"}),\"In-World Nodes\"),mdx(\"p\",null,`The main type of grid node are in-world grid nodes. They need to know their location and world when being created with\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"IManagedGridNode.create(Level, BlockPos)\"),`. External connections are automatically attempt to connect with adjacent\nin-world grid nodes by AE2 itself and do not need further handling.`),mdx(\"p\",null,`In-world nodes can be selectively exposed on specific sides, or on all sides. The exposed sides can be changed after\nnode creation and will automatically trigger a repathing.`),mdx(\"p\",null,\"To expose the actual \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGridNode\"),\", it needs to be exposed by \",mdx(\"inlineCode\",{parentName:\"p\"},\"IManagedGridNode.getNode()\"),` through an appropriate way like\ncapabilities.`),mdx(\"h3\",e({},{id:\"virtual-nodes\"}),\"Virtual Nodes\"),mdx(\"p\",null,`A special case are virtual nodes, which will not automatically form connection with other nodes. These allow addons to\nbuild ME networks outside the normal world for various reasons.`),mdx(\"p\",null,`As these do not automatically establish connections, these have to be manually created with by using\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"IGridHelper.createGridConnection(IGridNode, IGridNode)\"),\". Removing a connection requires destroying the \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGridNode\"),`,\nwhich also handles chunk unloading and ensures it leaving no old connections behind.`),mdx(\"h3\",e({},{id:\"node-services\"}),\"Node Services\"),mdx(\"p\",null,`The node's owner can add so-called services to a node, which can be used to add additional functionality or behavior to\ngrid nodes. Services are represented by an interface that extends from `,mdx(\"inlineCode\",{parentName:\"p\"},\"IGridService\"),\".\"),mdx(\"p\",null,`Node services are often used by grid services to offer additional functionality to grid nodes that implement a specific\nservice. These will be described in more detail in the description of the respective grid service.`),mdx(\"h3\",e({},{id:\"grid-services\"}),\"Grid Services\"),mdx(\"p\",null,\"Each grid provides several services to machines connected to the grid.\"),mdx(\"p\",null,\"AE2 provides some services by default (see sub-interfaces of \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGridService\"),`). Addons can register their own services\nusing `,mdx(\"inlineCode\",{parentName:\"p\"},\"GridServices\"),\".\"),mdx(\"p\",null,\"Services can be retrieved by calling \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGrid#getService\"),` by passing the grid service's interface. For getting AE2's\ndefault services, `,mdx(\"inlineCode\",{parentName:\"p\"},\"IGrid\"),\" offers several convenience methods.\"),mdx(\"h4\",e({},{id:\"energy\"}),\"Energy\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface:\"),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"IEnergyService\")),mdx(\"p\",null,`This service allows energy to be extracted from and injected into the grid's energy storage (i.e. energy cells, the\ngrid's internal storage, etc.).`),mdx(\"h4\",e({},{id:\"ticking\"}),\"Ticking\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface:\"),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"ITickManager\"),`\n`,mdx(\"strong\",{parentName:\"p\"},\"Convenience Getter\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGrid.getTickManager\")),mdx(\"p\",null,\"AE2 offers its grid connected machines an advanced ticking system with the following features:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Ticking without being a tickable block entity\"),mdx(\"li\",{parentName:\"ul\"},\"Variable tick rates\"),mdx(\"li\",{parentName:\"ul\"},\"Putting devices to sleep if they run out of work\"),mdx(\"li\",{parentName:\"ul\"},\"Waking sleeping devices in reaction to some event (i.e. neighbors changed)\")),mdx(\"p\",null,\"The grid's \",mdx(\"inlineCode\",{parentName:\"p\"},\"ITickManager\"),` service handles the per-grid aspects of this ticking system. It offers an API to manage the\nsleep/wake status of grid nodes.`),mdx(\"p\",null,\"To participate in the ticking system, your grid node must provide the \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGridTickable\"),`\ngrid node service. The `,mdx(\"inlineCode\",{parentName:\"p\"},\"ITickManager\"),\" reacts to the presence of this service when your grid node joins the grid.\"),mdx(\"h4\",e({},{id:\"storage\"}),\"Storage\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageService\"),`\n`,mdx(\"strong\",{parentName:\"p\"},\"Convenience Getter\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"IGrid.getStorageService\")),mdx(\"p\",null,`This service allows nodes to notify listeners about changes to their inventory that are not caused by normal\nextraction/insertion, such as the external inventories (i.e. chests) changing their content.`),mdx(\"p\",null,'Storage in grids is organized in \"cells\" which model inventories.'),mdx(\"p\",null,\"It also implements \",mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageMonitorable\"),\" to allow changes to the grid's inventory to be monitored.\"),mdx(\"h4\",e({},{id:\"auto-crafting\"}),\"Auto-Crafting\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"ICraftingService\")),mdx(\"h4\",e({},{id:\"security\"}),\"Security\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"ISecurityService\")),mdx(\"h4\",e({},{id:\"pathing\"}),\"Pathing\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"IPathingService\")),mdx(\"h4\",e({},{id:\"spatial-io\"}),\"Spatial I/O\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Service Interface\"),\": \",mdx(\"inlineCode\",{parentName:\"p\"},\"ISpatialService\")),mdx(\"h2\",e({},{id:\"adding-new-upgrades-or-making-upgradable-machines\"}),\"Adding New Upgrades or Making Upgradable Machines\"),mdx(\"p\",null,\"This will be made available in 10.0.0-beta.3.\"),mdx(\"p\",null,\"Relevant APIs:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"appeng.api.upgrades.Upgrades\"),\" for managing upgrade cards and associating them with machines\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"appeng.api.upgrades.UpgradeInventories\"),\" for creating upgrade inventories for use in upgradable machines or items\")),mdx(\"h3\",e({},{id:\"custom-upgrade-cards\"}),\"Custom Upgrade Cards\"),mdx(\"p\",null,`Each upgrade is unique identified by a registered item (the \"upgrade card\"). To create a custom upgrade card that\nbehaves like the existing AE2 cards (i.e. it can be inserted into the network tool's toolbelt), use the\nutility function `,mdx(\"inlineCode\",{parentName:\"p\"},\"Upgrades#createUpgradeCardItem\"),` to create an item for your card. Remember it's your responsibility\nto actually register this item, provide an icon and a translation key for it. It will however, show the tooltip for supported machines and support insertion into machines by right-click out of the box. `),mdx(\"h3\",e({},{id:\"associating-upgrade-cards-with-machines\"}),\"Associating Upgrade Cards with Machines\"),mdx(\"p\",null,`For both cases where your addon adds a custom machine or upgrade card, you need to associate possible upgrades\nwith potential machines. The `,mdx(\"inlineCode\",{parentName:\"p\"},\"Upgrades.add\"),` method allows you to link an upgrade card (represented by its Item) with\na Machine (also represented by an item, usually a `,mdx(\"inlineCode\",{parentName:\"p\"},\"BlockItem\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"IPartItem\"),\"). \"),mdx(\"p\",null,`If there are multiple machines that are treated equally with regard to upgrades, you can pass a translation key to\nthe `,mdx(\"inlineCode\",{parentName:\"p\"},\"tooltipGroup\"),` parameter. When displaying the tooltip for an upgrade card, all supported machines with the same\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"tooltipGroup\"),` will be merged into a single line and shown using the translation for the group. This was used\nfor displaying fluid and item parts as one line, as well as the block/part form of interfaces. `),mdx(\"h3\",e({},{id:\"making-custom-machines-upgradable\"}),\"Making custom Machines Upgradable\"),mdx(\"p\",null,\"You can use the factory class \",mdx(\"inlineCode\",{parentName:\"p\"},\"UpgradeInventories\"),` to create inventories for storing upgrade cards. These\ninventories will use the provided item to identify which upgrade cards are accepted by the inventory to\nautomatically prevent incompatible cards from being inserted.`),mdx(\"p\",null,\"They also offer convenience methods (see \",mdx(\"inlineCode\",{parentName:\"p\"},\"IUpgradeInventory\"),`) to quickly check if an upgrade is present or\ncount how many upgrades of a type are present.`),mdx(\"p\",null,\"For the machine version created by \",mdx(\"inlineCode\",{parentName:\"p\"},\"forMachine\"),`, you are responsible for saving the inventory yourself from the\nchange callback. For the item version created by `,mdx(\"inlineCode\",{parentName:\"p\"},\"forItem\"),\", the upgrade inventory will automatically save itself\\nto the provided \\xB4ItemStack` whenever its content changes.\"),mdx(\"h1\",e({},{id:\"changes-from-117-and-before-to-118\"}),\"Changes from 1.17 and before to 1.18\"),mdx(\"p\",null,\"There are large changes to the API in 1.18.\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"IAEStack\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"IAEItemStack\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"IAEFluidStack\"),` have been removed. The API now separates the \"what\" from the \"how much\"\nin that it uses `,mdx(\"inlineCode\",{parentName:\"p\"},\"AEKey\"),` to identify what is being transferred, while a separate method-argument is used for the\namount.`),mdx(\"p\",null,\"The mapping is roughly as follows:\"),mdx(\"table\",null,mdx(\"thead\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"thead\"},mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"Old Class\"),mdx(\"th\",e({parentName:\"tr\"},{align:null}),\"New Class\"))),mdx(\"tbody\",{parentName:\"table\"},mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IAEStack\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"GenericStack, AEKey\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IAEItemStack\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"GenericStack, AEItemKey\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IAEFluidStack\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"GenericStack, AEFluidKey\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IStorageChannel\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"AEKeyType\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"StorageChannels\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"AEKeyTypes\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"StorageChannels.items()\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"AEKeyType.items()\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"StorageChannels.fluids()\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"AEKeyType.fluids()\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IMEInventory\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"MEStorage\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IMEMonitorable\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"MEMonitorStorage\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IGuiItem\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IMenuItem (Use ItemMenuHost)\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IPortableCell\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IPortableTerminal\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"ICraftingMedium\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"ICraftingMachine\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"ICellProvider\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"IStorageProvider\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"getUnitsPerByte\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"getAmountPerByte\")),mdx(\"tr\",{parentName:\"tbody\"},mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"transferFactor\"),mdx(\"td\",e({parentName:\"tr\"},{align:null}),\"getAmountPerOperation\")))),mdx(\"p\",null,`The network inventory is no longer channel specific. It contains items, fluids and potentially keys\nfrom addons at the same time. This also means `,mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageMonitorable\"),` has become superfluous and was removed.\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageMonitorableAccessor\"),\" now gives direct access to the storage.\"),mdx(\"p\",null,`Stack watching has changed to only send the keys for which the stored amount has changed. This was\ndone since the amounts reported to the watchers were never reliable to begin with, and were never used.`),mdx(\"p\",null,`Craftable items are no longer reported as part of the network storage. It has been replaced by\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"grid.getCraftingService().getCraftables()\"),\". \",mdx(\"inlineCode\",{parentName:\"p\"},\"NoOpKeyFilter\"),` is provided in case you want all types of\nkeys, otherwise there are the convenience filters `,mdx(\"inlineCode\",{parentName:\"p\"},\"AEItemKey.filter()\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"AEFluidKey.filter()\"),` to\nonly retrieve items or fluids.`),mdx(\"p\",null,`Mounting storage into the network storage has been changed. Since storage has been unified across types,\nthe storage service will now call `,mdx(\"inlineCode\",{parentName:\"p\"},\"mountInventories\"),\" on the \",mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageProvider\"),` service provided by any\ngrid node and allow the node to \"mount\" storage into the network.\nWhen the node wants to remove or add storage due to an external event or config change, it can request\nthe storage to repeat the mounting process by calling `,mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageGrid.refreshNodeStorageProvider\"),` or using\nthe utility provided in `,mdx(\"inlineCode\",{parentName:\"p\"},\"IStorageProvider.requestUpdate\"),\". This supersedes sending the \",mdx(\"inlineCode\",{parentName:\"p\"},\"GridCellArrayUpdate\"),\" event.\"),mdx(\"h2\",e({},{id:\"internal-apis\"}),\"Internal APIs\"),mdx(\"p\",null,`The following changes have been made to internal APIs, which may still be of interest to addons that\ndepend on them.`),mdx(\"p\",null,\"Items that open AE GUIs are now more addon friendly. The \",mdx(\"inlineCode\",{parentName:\"p\"},\"ItemMenuHost\"),` class can be used as an easy\nway to implement a menu host for hosting terminals and other menus.`),mdx(\"p\",null,`The priority and crafting confirm menus now use a generic system for returning to the previous screen.\nYour part, block entity or item menu host needs to implement `,mdx(\"inlineCode\",{parentName:\"p\"},\"ISubMenuHost\"),\" for this to work.\"),mdx(\"p\",null,`Custom storage cells have been simplified, and the same class can be used to create addon storage\ncells for any stored item key. Due to the storage math still being different for items and fluids,\nthere are still key-type specific cells, which are all based on the same class `,mdx(\"inlineCode\",{parentName:\"p\"},\"BasicStorageCell\"),`,\nwhich doesn't have a guaranteed API however (this is an improvement for later).`))}MDXContent.isMDXComponent=!0;\n","scope":{"title":"Addon and Mod API"}},"frontMatter":{"title":"Addon and Mod API"},"pagePath":"/api.md"},"__N_SSG":true},"page":"/[[...slug]]","query":{"slug":["api"]},"buildId":"MtdSgGyLuMS424iNoQNTF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>